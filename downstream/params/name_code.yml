---
# ! think of how to structurally save parameter crawling output
# ! because there are just too many !
version: "0.0"
feat_format: "[shape_code].[mpp_code].[feat_code]"

code_list:
    - shape_code
    - feat_code
    - mpp_code

shape_code:
    "512_256": 0
    "256_128": 1

mpp_code:
    'mpp=1.00': 0
    'mpp=0.50': 1

feat_code:
    resnet50: 0
    swav_resnet50: 1

dataset_code:
    CPTAC-LUAD: 0
    CPTAC-LSCC: 1
    TCGA-LUAD: 2
    TCGA-LSCC: 3
    TCGA-LUAD-Frozen: 4
    TCGA-LSCC-Frozen: 5
    TCGA-CRC-DX: 6
    
method_code:
    'cnn' : 'cnn'
    'hopfield_pool' : hopfield_pool

split_code:
    "[luad-lscc]_train=tcga_test=cptac": 0
    "[luad-lscc-norm]_train=tcga_test=cptac": 1
    "[norm-tumor]_train=tcga_test=cptac": 2
    "subset_info" : src
    "[TCGA-LUAD]-KRAS-nested-5CV" : 3

    "[TCGA-CRC-DX]_MSI_Mohsin-4CV"  : '4.0' 
    "[TCGA-CRC-DX]_KRAS_Mohsin-4CV" : '4.1' 
    "[TCGA-CRC-DX]_BRAF_Mohsin-4CV" : '4.2' 
    "[TCGA-CRC-DX]_CIN_Mohsin-4CV"  : '4.3' 

    # taken from https://github.com/ncoudray/DeepPATH/issues/37, 1 is STK11, 0 is WT
    '[TCGA-LUAD]_STK11_DeepPathGithub_SingleSplit' : 5 
    #
    '[PDL1-AstraZeneca]-Katharina-CPS-10-splits' : 'x0' 
    #
    '[TCGA-LUAD]-EGFR-10-splits' : 'm1' # use 1 4 8
    '[TCGA-LUAD]-KRAS-10-splits' : 'm2'

downstream_format: 
    >- 
        [method_code]/[feat_format]-[split_code]-
        [atlas_code]-[subject_representation_method_code]/
        [model_param_idx]/[fold_code]/

subject_representation_method_code: 

    rep_substitue : 0
        # `rep_substitue`
        # use atlas to assign a patch to the closest atlas represenatives, that
        # patch features is then replaced by the features of the respective
        # atlas representative
    sbj_selection: 1
        # use the atlas to select #k patches closest to the each atlas centroid, hence
        # these are representaive of the subject according to the atlas, all of these
        # subject representatives features are fed to the model
    3closest_map: 2
        # use atlas to derive the 1st, 2nd, and 3rd closest centroids to each a patch,
        # the represenatives ID are tiled into a 3 channels images and fed to CNN
        
atlas_dataset_code:
    "0": No Atlas
    "1": Atlas built from [luad-lscc]_train=tcga_test=cptac, training split
    "2": Atlas built from all normal wsi in tcga
